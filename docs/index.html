<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>squoosh-webpack-plugin</title><meta name="description" content="Documentation for squoosh-webpack-plugin"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">squoosh-webpack-plugin</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>squoosh-webpack-plugin</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography"><p><img src="https://raw.githubusercontent.com/bcheidemann/squoosh-webpack-plugin/master/logo/favicons/android-chrome-192x192.png" alt="Squoosh Webpack Plugin Logo"></p>

<a href="#squoosh-webpack-plugin" id="squoosh-webpack-plugin" style="color: inherit; text-decoration: none;">
  <h1>Squoosh Webpack Plugin</h1>
</a>
<p>The squoosh webpack plugin allows you to integrate <a href="https://squoosh.app/">Squoosh</a> into your webpack builds. Squoosh is an open source <code>&quot;image compression web app that reduces image sizes through numerous formats&quot;</code> (<a href="https://github.com/GoogleChromeLabs/squoosh">Squoosh Github</a>) as well as a javascript library and command line tool.</p>

<a href="#typescript" id="typescript" style="color: inherit; text-decoration: none;">
  <h2>Typescript</h2>
</a>
<p>This project is written in typescript, meaning that in most modern IDEs you will receive type hinting - even when you&#39;re in a javascript file such as <code>webpack.config.js</code>.</p>

<a href="#what-can-it-do" id="what-can-it-do" style="color: inherit; text-decoration: none;">
  <h2>What can it do?</h2>
</a>
<p>The squoosh webpack plugin allows you to leverage the power of squoosh in your webpack builds. It will automatically optimise any images you import in your javascript web app.</p>
<p>By default, it generates a unique ID for each image so as not to generate duplicates. This also means that it will only generate new images when you change the encoder options, update an image (when not using the <code>preserveFileName</code> option), or add/rename an image.</p>
<p>It supports all codecs and encoder options supported by squoosh and allows you to configure these in the same way you would when using the squoosh command line tool or API directly.</p>

<a href="#what-can39t-it-do" id="what-can39t-it-do" style="color: inherit; text-decoration: none;">
  <h2>What can&#39;t it do?</h2>
</a>
<p>The squoosh webpack plugin currently does not currently support any preprocessor options such as image resizing or rotation.</p>

<a href="#what-next" id="what-next" style="color: inherit; text-decoration: none;">
  <h2>What next?</h2>
</a>
<p>Planned features for this plugin are as follows:</p>
<ul>
<li>Add support for all preprocessor options available in Squoosh.</li>
<li>Add support for per image config files so that you can customise the encoder and preprocessor options an a per image basis</li>
<li>Any suggestions for improvements? Please raise an issue on <a href="https://github.com/bcheidemann/squoosh-webpack-plugin">github</a> - I&#39;d love to hear from you!</li>
</ul>

<a href="#documentation" id="documentation" style="color: inherit; text-decoration: none;">
  <h2>Documentation</h2>
</a>
<p>Documentation for this project is available <a href="https://squoosh-webpack-plugin.info/">here</a>.</p>

<a href="#basic-usage" id="basic-usage" style="color: inherit; text-decoration: none;">
  <h2>Basic Usage</h2>
</a>
<p>First install the plugin from yarn or npm.</p>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">install</span><span class="hl-1"> --</span><span class="hl-0">save</span><span class="hl-1">-</span><span class="hl-0">dev</span><span class="hl-1"> </span><span class="hl-0">squoosh</span><span class="hl-1">-</span><span class="hl-0">webpack</span><span class="hl-1">-</span><span class="hl-0">plugin</span>
</code></pre>
<p>Now add the following to your <code>webpack.config.js</code>.</p>
<pre><code class="language-javascript"><span class="hl-2">const</span><span class="hl-1"> { </span><span class="hl-3">SquooshPlugin</span><span class="hl-1"> } = </span><span class="hl-4">require</span><span class="hl-1">(</span><span class="hl-5">&quot;squoosh-webpack-plugin&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-6">module</span><span class="hl-1">.</span><span class="hl-6">exports</span><span class="hl-1"> = (</span><span class="hl-0">config</span><span class="hl-1">, </span><span class="hl-0">context</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">return</span><span class="hl-1"> {</span><br/><span class="hl-1">    ...</span><span class="hl-0">config</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">plugins:</span><span class="hl-1"> [</span><br/><span class="hl-1">      ...</span><span class="hl-0">config</span><span class="hl-1">.</span><span class="hl-0">plugins</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-4">SquooshPlugin</span><span class="hl-1">(),</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">  };</span><br/><span class="hl-1">};</span>
</code></pre>
<p>This will initialise the plugin with default options. By default, squoosh will use the <code>mozjpeg</code> codec. By default, output images will be placed in the same folder as the input file.</p>

<a href="#basic-configuration" id="basic-configuration" style="color: inherit; text-decoration: none;">
  <h2>Basic Configuration</h2>
</a>
<p>The plugin constructor accepts an options object which allows you to configure the default behaviour.</p>
<pre><code class="language-javascript"><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-4">SquooshPlugin</span><span class="hl-1">({</span><br/><span class="hl-1">  ...</span><span class="hl-0">options</span><span class="hl-1">,</span><br/><span class="hl-1">});</span>
</code></pre>
<p>One of the first things you might want to change is the output directory. If you have a specific directory to which you wish to export your images after Squoosh has done it&#39;s magic, this can be specified with the <code>outDir</code> option.</p>
<pre><code class="language-javascript"><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-4">SquooshPlugin</span><span class="hl-1">({</span><br/><span class="hl-1">  ...</span><span class="hl-0">options</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">outDir:</span><span class="hl-1"> </span><span class="hl-5">&#39;public/images&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span>
</code></pre>
<p>You can choose a codec and/or specify some encoder options as shown below.</p>
<pre><code class="language-javascript"><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-4">SquooshPlugin</span><span class="hl-1">({</span><br/><span class="hl-1">  ...</span><span class="hl-0">options</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">codec:</span><span class="hl-1"> </span><span class="hl-5">&#39;mozjpeg&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">encoderOptions:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">quality:</span><span class="hl-1"> </span><span class="hl-8">65</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code></pre>

<a href="#options" id="options" style="color: inherit; text-decoration: none;">
  <h2>Options</h2>
</a>
<table>
<thead>
<tr>
<th>Option</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>extensions</td>
<td>Aray | Function</td>
<td>See <a href="#extensions">extensions</a></td>
<td>Extensions can be used to implement arbitrary custom behaviour.</td>
</tr>
<tr>
<td>encoderOptions</td>
<td><code>object</code></td>
<td>-</td>
<td>The encoder options passed to Squoosh. Each codec has different default options.</td>
</tr>
<tr>
<td>codec</td>
<td><code>string</code></td>
<td><code>&quot;mozjpeg&quot;</code></td>
<td>Codec used to encode images.</td>
</tr>
<tr>
<td>useWorker</td>
<td><code>boolean</code></td>
<td><code>true</code></td>
<td>Invoke Squoosh from a Node child process. This is not a performance optimisation but disabling it may cause conflicts with certain other Webpack plugins.</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>requestPrefix</td>
<td><code>string</code></td>
<td>-</td>
<td>If specified, only files starting with this prefix will be included. This option is managed internally by the <code>BaseResolverExtension</code>.</td>
</tr>
<tr>
<td>include</td>
<td><code>RegExp</code></td>
<td><code>/\.(jpeg|jpg|png)$/</code></td>
<td>If defined, files which match the regex pattern will be included. This option is managed internally by the <code>BaseResolverExtension</code>.</td>
</tr>
<tr>
<td>exclude</td>
<td><code>RegExp</code></td>
<td>-</td>
<td>If defined, files which match the regex pattern will be excluded. This option is managed internally by the <code>BaseResolverExtension</code>.</td>
</tr>
<tr>
<td>dirs</td>
<td><code>Array</code></td>
<td>-</td>
<td>If defined, only files in one of the directories will be included. This option is managed internally by the <code>BaseResolverExtension</code>.</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>outDir</td>
<td><code>string</code></td>
<td>-</td>
<td>If defined, encoded images will be output to this directory. This option is managed internally by the <code>DefaultOutputPathExtension</code>.</td>
</tr>
<tr>
<td>uuidNamespace</td>
<td><code>string</code></td>
<td>-</td>
<td>Used to produce a unique filename if <code>preserveFileName</code> is set to <code>false</code>. This option is managed internally by the <code>DefaultOutputPathExtension</code>.</td>
</tr>
<tr>
<td>preserveFileName</td>
<td><code>boolean</code></td>
<td><code>false</code></td>
<td>If true, file names will be preserved and only the extension will change. This option is managed internally by the <code>DefaultOutputPathExtension</code>.</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>For more information on options, see the <a href="https://squoosh-webpack-plugin.info/">documentation</a> and <a href="https://github.com/GoogleChromeLabs/squoosh">Squoosh github page</a>.</p>

<a href="#extensions" id="extensions" style="color: inherit; text-decoration: none;">
  <h2>Extensions</h2>
</a>
<p>Extensions can be used to customise the behaviour of the plugin. They are used internally to implement the default behaviour.</p>
<p>Setting the <code>extensions</code> option to an array will concatenate the extensions in the array with the default extensions:</p>
<ul>
<li><code>BaseResolverExtension</code></li>
<li><code>BasicCacheExtension</code></li>
<li><code>DefaultOptionsExtension</code></li>
<li><code>DefaultOutputPathExtension</code></li>
<li><code>EnsureOutputDirectoryExtension</code></li>
</ul>
<p>It is also possible to set the <code>extensions</code> option to a function. This will receive an array of the default extensions and should return an array of extensions. This is primarily useful if you wish to exclude one or more of the default extensions.</p>
<p>Extensions should be an object or class which implements the <code>Extension</code> type. It is recommended to define the name property for error logging purposes. One or more hook functions may be defined to tap into various stages of the plugins lifecycle.</p>
<p>The available hooks are:</p>
<ul>
<li><code>initialize</code></li>
<li><code>request</code></li>
<li><code>prepare</code></li>
</ul>
<p>If you intend to implement an extension, it is recommended to use the existing internal plugins for guidance. If you feel the functionality you are implementing should be part of the plugin, feel free to open a PR or an issue.</p>

<a href="#contributing" id="contributing" style="color: inherit; text-decoration: none;">
  <h2>Contributing</h2>
</a>
<p>Want to get involved? Great! Feel free to help out by raising a bug, submitting a feature request or opening a pull request in <a href="https://github.com/bcheidemann/squoosh-webpack-plugin">github</a>.</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-enum"><a href="enums/AVIFTune.html" class="tsd-kind-icon">AVIFTune</a></li><li class="tsd-kind-enum"><a href="enums/Csp.html" class="tsd-kind-icon">Csp</a></li><li class="tsd-kind-enum"><a href="enums/MozJpegColorSpace.html" class="tsd-kind-icon">Moz<wbr/>Jpeg<wbr/>Color<wbr/>Space</a></li><li class="tsd-kind-enum"><a href="enums/UVMode.html" class="tsd-kind-icon">UVMode</a></li><li class="tsd-kind-class tsd-has-type-parameter"><a href="classes/SquooshPlugin.html" class="tsd-kind-icon">Squoosh<wbr/>Plugin</a></li><li class="tsd-kind-interface"><a href="interfaces/AvifEncodeOptions.html" class="tsd-kind-icon">Avif<wbr/>Encode<wbr/>Options</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/Extension.html" class="tsd-kind-icon">Extension</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/HookContext.html" class="tsd-kind-icon">Hook<wbr/>Context</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/InitializeOptions.html" class="tsd-kind-icon">Initialize<wbr/>Options</a></li><li class="tsd-kind-interface"><a href="interfaces/JxlEncodeOptions.html" class="tsd-kind-icon">Jxl<wbr/>Encode<wbr/>Options</a></li><li class="tsd-kind-interface"><a href="interfaces/MozJPEGEncodeOptions.html" class="tsd-kind-icon">MozJPEGEncode<wbr/>Options</a></li><li class="tsd-kind-interface"><a href="interfaces/OxiPngEncodeOptions.html" class="tsd-kind-icon">Oxi<wbr/>Png<wbr/>Encode<wbr/>Options</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/PrepareOptions.html" class="tsd-kind-icon">Prepare<wbr/>Options</a></li><li class="tsd-kind-interface"><a href="interfaces/RequestOptions.html" class="tsd-kind-icon">Request<wbr/>Options</a></li><li class="tsd-kind-interface"><a href="interfaces/WP2EncodeOptions.html" class="tsd-kind-icon">WP2<wbr/>Encode<wbr/>Options</a></li><li class="tsd-kind-interface"><a href="interfaces/WebPEncodeOptions.html" class="tsd-kind-icon">WebPEncode<wbr/>Options</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Codecs" class="tsd-kind-icon">Codecs</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Hook" class="tsd-kind-icon">Hook</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#InitializeHook" class="tsd-kind-icon">Initialize<wbr/>Hook</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#PrepareHook" class="tsd-kind-icon">Prepare<wbr/>Hook</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#RequestHook" class="tsd-kind-icon">Request<wbr/>Hook</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#SquooshEncodeOptions" class="tsd-kind-icon">Squoosh<wbr/>Encode<wbr/>Options</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#SquooshPluginOptions" class="tsd-kind-icon">Squoosh<wbr/>Plugin<wbr/>Options</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>